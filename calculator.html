<!DOCTYPE html>
<html lang="en">
<head><style>
    body {
    margin: 0;
    background: #f9f8d8;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-family: Arial, sans-serif;
}
.calculator {
    width: 320px;
    background: white;
    padding: 20px;
    border-radius: 16px;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
}
.display {
    background: #1e1e1e;
    color: white;
    padding: 15px;
    border-radius: 12px;
    text-align: right;
    margin-bottom: 15px;
    height: 80px;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

#expression {
    font-size: 20px;
    opacity: 0.8;
}

#result {
    font-size: 28px;
    font-weight: bold;
    margin-top: 4px;
}

.buttons {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
}

.btn {
    padding: 18px;
    font-size: 20px;
    background: #ffffff;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: 0.15s;
}

.btn:hover {
    background: #e1e4fe;
}

.op {
    background: #ffd787;
}

.op:hover {
    background: #febe46;
}

.equal {
    background: #92ff96;
    color: rgb(3, 0, 0);
}

.equal:hover {
    background: #5aff41;
}

.zero {
    grid-column: span 2;
}

.action {
    background: #ff9999;
    color: rgb(0, 0, 0);
}

.action:hover {
    background: #ff4e4e;
}
</style>
</head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Calculator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="calculator">
    <div class="display">
        <div id="expression"></div>
        <div id="result"></div>
    </div>

    <div class="buttons">
        <button class="btn action" data-val="C">C</button>
        <button class="btn action" data-val="⌫">⌫</button>
        <button class="btn op" data-val="÷">÷</button>
        <button class="btn op" data-val="×">×</button>

        <button class="btn" data-val="7">7</button>
        <button class="btn" data-val="8">8</button>
        <button class="btn" data-val="9">9</button>
        <button class="btn op" data-val="-">−</button>

        <button class="btn" data-val="4">4</button>
        <button class="btn" data-val="5">5</button>
        <button class="btn" data-val="6">6</button>
        <button class="btn op" data-val="+">+</button>

        <button class="btn" data-val="1">1</button>
        <button class="btn" data-val="2">2</button>
        <button class="btn" data-val="3">3</button>
        <button class="btn equal" data-val="=">=</button>

        <button class="btn zero" data-val="0">0</button>
        <button class="btn" data-val=".">.</button>
    </div>
</div>

<script src="script.js"></script>
</body>
</html>
<script>const expressionEl = document.getElementById("expression");
const resultEl = document.getElementById("result");

let expr = "";

// Handle button clicks
document.querySelectorAll(".btn").forEach(btn => {
    btn.addEventListener("click", () => {
        const val = btn.dataset.val;

        if (val === "C") {
            expr = "";
            resultEl.textContent = "";
        } 
        else if (val === "⌫") {
            expr = expr.slice(0, -1);
        } 
        else if (val === "=") {
            const res = evaluateExpression(expr);
            resultEl.textContent = res !== null ? res : "Error";
        } 
        else {
            expr += val;
        }

        expressionEl.textContent = expr;
    });
});

// Evaluate safely without eval()
function evaluateExpression(str) {
    try {
        // Replace × and ÷
        str = str.replace(/×/g, "*").replace(/÷/g, "/");

        // Tokenize numbers + operators
        const tokens = str.match(/(\d+(\.\d+)?)|[+\-*/]/g);
        if (!tokens) return null;

        // First pass: * and /
        for (let i = 0; i < tokens.length; i++) {
            if (tokens[i] === "*" || tokens[i] === "/") {
                const left = parseFloat(tokens[i - 1]);
                const right = parseFloat(tokens[i + 1]);

                const result = tokens[i] === "*" ? left * right : left / right;

                tokens.splice(i - 1, 3, result.toString());
                i--;
            }
        }

        // Second pass: + and -
        let result = parseFloat(tokens[0]);
        for (let i = 1; i < tokens.length; i += 2) {
            const op = tokens[i];
            const num = parseFloat(tokens[i + 1]);

            if (op === "+") result += num;
            else if (op === "-") result -= num;
        }

        return result;
    } catch {
        return null;
    }
}

</script>
